{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/check.js","src/twist/TwistFilter.js","src/twist"],"names":["f","exports","module","define","amd","g","window","global","self","this","twist","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","PIXI","TwistFilter","Filter","radius","angle","padding","prototype","Object","create","constructor","defineProperties","offset","get","uniforms","set","value","filter","filters"],"mappings":";;;;;;;CAAA,SAAAA,GAAA,GAAA,gBAAAC,UAAA,mBAAAC,QAAAA,OAAAD,QAAAD,QAAA,IAAA,kBAAAG,SAAAA,OAAAC,IAAAD,UAAAH,OAAA,CAAA,GAAAK,EAAAA,GAAA,mBAAAC,QAAAA,OAAA,mBAAAC,QAAAA,OAAA,mBAAAC,MAAAA,KAAAC,KAAAJ,EAAAK,MAAAV,MAAA,WAAA,MAAA,SAAAW,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAhB,GAAA,GAAAqB,OAAA,uBAAAL,EAAA,IAAA,MAAAhB,GAAAsB,KAAA,mBAAAtB,EAAA,GAAAuB,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,GAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,IAAA,GAAAmB,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAW,GAAA,SAAAP,EAAAjB,EAAAD,GCCA,GAAA,mBAAA0B,MACA,KAAA,IAAAN,OAAA,8DCOA,QAAAO,KAEAD,KAAAE,OAAAL,KAAAf,KAEA,ySAEA,igCAGAA,KAAAqB,OAAA,IACArB,KAAAsB,MAAA,EACAtB,KAAAuB,QAAA,GAGAJ,EAAAK,UAAAC,OAAAC,OAAAR,KAAAE,OAAAI,WACAL,EAAAK,UAAAG,YAAAR,EACA1B,EAAAD,QAAA2B,EAEAM,OAAAG,iBAAAT,EAAAK,WAOAK,QACAC,IAAA,WAEA,MAAA9B,MAAA+B,SAAAF,QAEAG,IAAA,SAAAC,GAEAjC,KAAA+B,SAAAF,OAAAI,IAUAZ,QACAS,IAAA,WAEA,MAAA9B,MAAA+B,SAAAV,QAEAW,IAAA,SAAAC,GAEAjC,KAAA+B,SAAAV,OAAAY,IAUAX,OACAQ,IAAA,WAEA,MAAA9B,MAAA+B,SAAAT,OAEAU,IAAA,SAAAC,GAEAjC,KAAA+B,SAAAT,MAAAW,8BC3EAvB,EAAA,WAEA,IAAAwB,GAAAhB,KAAAiB,QAAAhB,YAAAT,EAAA,qBAGA,KAAAjB,GAAAA,EAAAD,UACAC,EAAAD,QAAA0C","file":"twist.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Make sure PIXI global object is available\nif (typeof PIXI === \"undefined\") {\n    throw new Error('pixi.js is required to be included');\n}","\n\n/**\n * This filter applies a twist effect making display objects appear twisted in the given direction.\n *\n * @class\n * @extends PIXI.Filter\n * @memberof PIXI.filters\n */\nfunction TwistFilter()\n{\n    PIXI.Filter.call(this,\n        // vertex shader\n        \"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",\n        // fragment shader\n        \"#define GLSLIFY 1\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform float radius;\\nuniform float angle;\\nuniform vec2 offset;\\nuniform vec4 filterArea;\\n\\nvec2 mapCoord( vec2 coord )\\n{\\n    coord *= filterArea.xy;\\n    coord += filterArea.zw;\\n\\n    return coord;\\n}\\n\\nvec2 unmapCoord( vec2 coord )\\n{\\n    coord -= filterArea.zw;\\n    coord /= filterArea.xy;\\n\\n    return coord;\\n}\\n\\nvec2 twist(vec2 coord)\\n{\\n    coord -= offset;\\n\\n    float dist = length(coord);\\n\\n    if (dist < radius)\\n    {\\n        float ratioDist = (radius - dist) / radius;\\n        float angleMod = ratioDist * ratioDist * angle;\\n        float s = sin(angleMod);\\n        float c = cos(angleMod);\\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\\n    }\\n\\n    coord += offset;\\n\\n    return coord;\\n}\\n\\nvoid main(void)\\n{\\n\\n    vec2 coord = mapCoord(vTextureCoord);\\n\\n    coord = twist(coord);\\n\\n    coord = unmapCoord(coord);\\n\\n    gl_FragColor = texture2D(uSampler, coord );\\n\\n}\\n\"\n    );\n\n    this.radius = 200;\n    this.angle = 4;\n    this.padding = 20;\n}\n\nTwistFilter.prototype = Object.create(PIXI.Filter.prototype);\nTwistFilter.prototype.constructor = TwistFilter;\nmodule.exports = TwistFilter;\n\nObject.defineProperties(TwistFilter.prototype, {\n    /**\n     * This point describes the the offset of the twist.\n     *\n     * @member {PIXI.Point}\n     * @memberof PIXI.filters.TwistFilter#\n     */\n    offset: {\n        get: function ()\n        {\n            return this.uniforms.offset;\n        },\n        set: function (value)\n        {\n            this.uniforms.offset = value;\n        }\n    },\n\n    /**\n     * This radius of the twist.\n     *\n     * @member {number}\n     * @memberof PIXI.filters.TwistFilter#\n     */\n    radius: {\n        get: function ()\n        {\n            return this.uniforms.radius;\n        },\n        set: function (value)\n        {\n            this.uniforms.radius = value;\n        }\n    },\n\n    /**\n     * This angle of the twist.\n     *\n     * @member {number}\n     * @memberof PIXI.filters.TwistFilter#\n     */\n    angle: {\n        get: function ()\n        {\n            return this.uniforms.angle;\n        },\n        set: function (value)\n        {\n            this.uniforms.angle = value;\n        }\n    }\n});\n","require('../check');\n\nvar filter = PIXI.filters.TwistFilter = require('./TwistFilter');\n\n// Export for requiring\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = filter;\n}"],"sourceRoot":"."}